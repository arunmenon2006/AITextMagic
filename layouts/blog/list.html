{{ define "main" }}
<section class="page-header">
    <div class="container">
        <h1>{{ .Title }}</h1>
        <p class="page-description">{{ .Params.description | default "Discover insights about AI-powered content creation, writing tips, and industry trends." }}</p>
    </div>
</section>

<section class="blog-content">
    <div class="container">
        {{ if .Paginator.Pages }}
        <div class="blog-posts">
            {{ range .Paginator.Pages.ByDate.Reverse }}
            <article class="blog-post-card">
                <div class="post-image">
                    {{ if .Params.image }}
                    <img src="{{ .Params.image | relURL }}" alt="{{ .Title }}" loading="lazy">
                    {{ else }}
                    <div class="placeholder-image">
                        <span class="blog-icon">üìù</span>
                    </div>
                    {{ end }}
                </div>

                <div class="post-content">
                    <div class="post-meta">
                        <time datetime="{{ .Date.Format "2006-01-02" }}">
                            {{ .Date.Format "January 2, 2006" }}
                        </time>
                        {{ if .Params.author }}
                        <span class="author">by {{ .Params.author }}</span>
                        {{ end }}
                        {{ if .Params.readingTime }}
                        <span class="reading-time">{{ .Params.readingTime }} min read</span>
                        {{ end }}
                    </div>

                    <h2><a href="{{ .Permalink }}">{{ .Title }}</a></h2>

                    {{ if .Params.description }}
                    <p class="post-excerpt">{{ .Params.description }}</p>
                    {{ else }}
                    <p class="post-excerpt">{{ .Summary | truncate 150 }}...</p>
                    {{ end }}

                    {{ if .Params.tags }}
                    <div class="post-tags">
                        {{ range .Params.tags }}
                        <span class="tag">{{ . }}</span>
                        {{ end }}
                    </div>
                    {{ end }}

                    <a href="{{ .Permalink }}" class="read-more">Read Full Article ‚Üí</a>
                </div>
            </article>
            {{ end }}
        </div>

        <!-- Enhanced Pagination Controls -->
{{ if gt .Paginator.TotalPages 1 }}
<div class="pagination-wrapper mt-12 mb-8">
    <nav class="pagination-nav" aria-label="Blog pagination">
        <div class="pagination-container">
            <!-- Previous Button -->
            {{ if .Paginator.HasPrev }}
                <a href="{{ .Paginator.Prev.URL }}" class="pagination-btn pagination-prev" rel="prev">
                    <svg class="pagination-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    Previous
                </a>
            {{ else }}
                <span class="pagination-btn pagination-disabled">
                    <svg class="pagination-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    Previous
                </span>
            {{ end }}

            <!-- Page Numbers -->
            <div class="pagination-numbers">
                {{ $paginator := .Paginator }}
                {{ $adjacent_links := 2 }}
                {{ $max_links := (add (mul $adjacent_links 2) 1) }}
                {{ $lower_limit := (add $adjacent_links 1) }}
                {{ $upper_limit := (sub $paginator.TotalPages $adjacent_links) }}

                <!-- First page -->
                {{ if and (gt $paginator.TotalPages $max_links) (gt $paginator.PageNumber $lower_limit) }}
                    <a href="{{ $paginator.First.URL }}" class="pagination-number">1</a>
                    {{ if gt $paginator.PageNumber (add $lower_limit 1) }}
                        <span class="pagination-ellipsis">...</span>
                    {{ end }}
                {{ end }}

                <!-- Page numbers -->
                {{ range $paginator.Pagers }}
                    {{ $.Scratch.Set "page_number_flag" false }}
                    
                    {{ if gt $paginator.TotalPages $max_links }}
                        {{ if le $paginator.PageNumber $lower_limit }}
                            {{ if le .PageNumber $max_links }}
                                {{ $.Scratch.Set "page_number_flag" true }}
                            {{ end }}
                        {{ else if ge $paginator.PageNumber $upper_limit }}
                            {{ if gt .PageNumber (sub $paginator.TotalPages $max_links) }}
                                {{ $.Scratch.Set "page_number_flag" true }}
                            {{ end }}
                        {{ else }}
                            {{ if and (ge .PageNumber (sub $paginator.PageNumber $adjacent_links)) (le .PageNumber (add $paginator.PageNumber $adjacent_links)) }}
                                {{ $.Scratch.Set "page_number_flag" true }}
                            {{ end }}
                        {{ end }}
                    {{ else }}
                        {{ $.Scratch.Set "page_number_flag" true }}
                    {{ end }}

                    {{ if eq ($.Scratch.Get "page_number_flag") true }}
                        {{ if eq . $paginator }}
                            <span class="pagination-number pagination-current" aria-current="page">{{ .PageNumber }}</span>
                        {{ else }}
                            <a href="{{ .URL }}" class="pagination-number">{{ .PageNumber }}</a>
                        {{ end }}
                    {{ end }}
                {{ end }}

                <!-- Last page -->
                {{ if and (gt $paginator.TotalPages $max_links) (lt $paginator.PageNumber $upper_limit) }}
                    {{ if lt $paginator.PageNumber (sub $upper_limit 1) }}
                        <span class="pagination-ellipsis">...</span>
                    {{ end }}
                    <a href="{{ $paginator.Last.URL }}" class="pagination-number">{{ $paginator.TotalPages }}</a>
                {{ end }}
            </div>

            <!-- Next Button -->
            {{ if .Paginator.HasNext }}
                <a href="{{ .Paginator.Next.URL }}" class="pagination-btn pagination-next" rel="next">
                    Next
                    <svg class="pagination-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
            {{ else }}
                <span class="pagination-btn pagination-disabled">
                    Next
                    <svg class="pagination-icon" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </span>
            {{ end }}
        </div>

        <!-- Page Info -->
        <div class="pagination-info">
            <span class="text-sm text-gray-600">
                Page {{ .Paginator.PageNumber }} of {{ .Paginator.TotalPages }}
                
            </span>
        </div>
    </nav>
</div>

<style>
.pagination-wrapper {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 1rem;
    margin-top: 3rem;
    margin-bottom: 2rem;
    padding: 0 1rem;
}

.pagination-nav {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 0.75rem;
    width: 100%;
    max-width: 800px;
}

.pagination-container {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 0.5rem;
    flex-wrap: wrap;
    width: 100%;
}

.pagination-btn {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    padding: 0.75rem 1.25rem;
    border: 2px solid #e5e7eb;
    border-radius: 0.5rem;
    background-color: #ffffff;
    color: #374151;
    text-decoration: none;
    font-weight: 500;
    font-size: 0.95rem;
    transition: all 0.2s ease;
    min-width: 100px;
    justify-content: center;
}

.pagination-btn:hover:not(.pagination-disabled) {
    background-color: #f3f4f6;
    border-color: #d1d5db;
    color: #1f2937;
    transform: translateY(-1px);
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.pagination-disabled {
    opacity: 0.5;
    cursor: not-allowed;
    color: #9ca3af;
    border-color: #f3f4f6;
    background-color: #f9fafb;
}

.pagination-icon {
    width: 1.25rem;
    height: 1.25rem;
    stroke-width: 2;
}

.pagination-numbers {
    display: flex;
    align-items: center;
    gap: 0.25rem;
    flex-wrap: wrap;
    justify-content: center;
}

.pagination-number {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    border: 2px solid #e5e7eb;
    border-radius: 0.5rem;
    background-color: #ffffff;
    color: #374151;
    text-decoration: none;
    font-weight: 500;
    font-size: 0.9rem;
    transition: all 0.2s ease;
}

.pagination-number:hover:not(.pagination-current) {
    background-color: #f3f4f6;
    border-color: #d1d5db;
    color: #1f2937;
    transform: translateY(-1px);
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

.pagination-current {
    background-color: #3b82f6;
    border-color: #3b82f6;
    color: #ffffff;
    cursor: default;
    box-shadow: 0 2px 4px rgba(59, 130, 246, 0.3);
}

.pagination-ellipsis {
    display: flex;
    align-items: center;
    justify-content: center;
    width: 2.5rem;
    height: 2.5rem;
    color: #9ca3af;
    font-weight: 500;
}

.pagination-info {
    text-align: center;
    margin-top: 0.5rem;
}

.text-sm {
    font-size: 0.875rem;
    line-height: 1.25rem;
}

.text-gray-600 {
    color: #4b5563;
}

/* Responsive Design */
@media (max-width: 768px) {
    .pagination-container {
        gap: 0.25rem;
    }
    
    .pagination-btn {
        padding: 0.625rem 1rem;
        font-size: 0.875rem;
        min-width: 80px;
    }
    
    .pagination-number {
        width: 2.25rem;
        height: 2.25rem;
        font-size: 0.85rem;
    }
    
    .pagination-wrapper {
        margin-top: 2rem;
        padding: 0 0.5rem;
    }
}

@media (max-width: 480px) {
    .pagination-container {
        flex-direction: column;
        gap: 1rem;
    }
    
    .pagination-numbers {
        order: 2;
    }
    
    .pagination-prev {
        order: 1;
    }
    
    .pagination-next {
        order: 3;
    }
}

/* Dark mode support (optional) */
@media (prefers-color-scheme: dark) {
    .pagination-btn {
        background-color: #1f2937;
        border-color: #374151;
        color: #f9fafb;
    }
    
    .pagination-btn:hover:not(.pagination-disabled) {
        background-color: #374151;
        border-color: #4b5563;
        color: #ffffff;
    }
    
    .pagination-disabled {
        background-color: #111827;
        border-color: #1f2937;
        color: #6b7280;
    }
    
    .pagination-number {
        background-color: #1f2937;
        border-color: #374151;
        color: #f9fafb;
    }
    
    .pagination-number:hover:not(.pagination-current) {
        background-color: #374151;
        border-color: #4b5563;
        color: #ffffff;
    }
    
    .text-gray-600 {
        color: #9ca3af;
    }
}
</style>
{{ end }}

        {{ else }}
        <div class="no-posts text-center py-16">
            <h3 class="text-2xl font-semibold">No blog posts yet</h3>
            <p class="mt-2 text-gray-600">Check back soon for insights about AI-powered content creation!</p>
        </div>
        {{ end }}
    </div>
</section>
{{ end }}
